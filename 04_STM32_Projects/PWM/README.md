STM32 PWM and UART Example
Overview

This project demonstrates the initialization and basic usage of:

TIM2 for PWM generation

USART2 for UART communication (115200 baud, 8N1)

GPIO (with button interrupt on B1_Pin)

The project is generated using STM32CubeMX / STM32CubeIDE and follows the HAL driver framework.

Features

System Clock: Configured with HSI and PLL for stable operation

TIM2 (PWM):

Configured in PWM mode on TIM_CHANNEL_1

Period set to 255 (8-bit style duty cycle)

Ready for LED brightness control or motor speed control

USART2 (UART):

Baud rate: 115200

TX/RX enabled

Can be used for debugging or external communication

GPIO:

Configured with interrupt on B1_Pin (user button)

File Structure

main.c → Contains the application entry point and peripheral initialization

stm32fxxx_hal_xxx.c → HAL driver files generated by CubeMX

Core/Inc → Header files

Core/Src → Source files

How to Use

Open the project in STM32CubeIDE.

Build and flash to your STM32 development board (e.g., Nucleo or Discovery).

Connect UART2 pins (PA2: TX, PA3: RX) to a USB-to-Serial adapter for debugging.

Use PWM output (TIM2_CH1) pin to connect LED or motor driver for testing duty cycle.

Modify the duty cycle by changing sConfigOC.Pulse in MX_TIM2_Init().

Example: Start PWM on TIM2 Channel 1

Add the following inside /* USER CODE BEGIN 2 */ in main.c:

HAL_TIM_PWM_Start(&htim2, TIM_CHANNEL_1);

// Example: set duty cycle = 50%
__HAL_TIM_SET_COMPARE(&htim2, TIM_CHANNEL_1, 128);

Example: Send Data via UART2

Inside main loop (while(1)):

char msg[] = "Hello STM32!\r\n";
HAL_UART_Transmit(&huart2, (uint8_t*)msg, strlen(msg), HAL_MAX_DELAY);
HAL_Delay(1000);

Requirements

STM32CubeIDE or Keil µVision (with HAL drivers)

STM32 board with TIM2 and USART2 support

USB-to-UART adapter (for PC serial monitor)

License

This project is based on STM32 HAL drivers and follows the STMicroelectronics license provided in the source code.
